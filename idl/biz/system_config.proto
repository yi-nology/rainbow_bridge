syntax = "proto3";

package system_config;
import "api.proto";
import "common.proto";

// SystemConfig represents a system configuration entry.
// SystemConfig is environment-scoped only (no pipeline_key dependency).
message SystemConfig {
  string environment_key = 1;
  reserved 2; // Removed: pipeline_key (system config is now environment-scoped only)
  string config_key = 3;
  string config_value = 4;
  string remark = 5;
  string config_type = 6; // 数据类型: config, text, image, color, keyvalue
}

// GetSystemConfigRequest is used to get a system config.
message GetSystemConfigRequest {
  string environment_key = 1;
  reserved 2; // Removed: pipeline_key
  string config_key = 3;
}

// UpdateSystemConfigRequest is used to update a system config.
message UpdateSystemConfigRequest {
  SystemConfig system_config = 1;
}

// CreateSystemConfigRequest is used to create a new system config.
message CreateSystemConfigRequest {
  SystemConfig system_config = 1;
}

// DeleteSystemConfigRequest is used to delete a system config.
message DeleteSystemConfigRequest {
  string environment_key = 1;
  reserved 2; // Removed: pipeline_key
  string config_key = 3;
}

// ListSystemConfigRequest is used to list system configs for an environment.
// SystemConfig is environment-scoped only (no pipeline_key dependency).
message ListSystemConfigRequest {
  string environment_key = 1;
  reserved 2; // Removed: pipeline_key
}

// SystemConfigResponse contains a single system config.
message SystemConfigResponse {
  common.OperateResponse operate_response = 1;
  SystemConfig system_config = 2;
}

// SystemConfigListResponse contains a list of system configs.
message SystemConfigListResponse {
  repeated SystemConfig list = 1;
}

// SystemConfigService handles system config operations.
service SystemConfigService {
  // Get returns a specific system config.
  rpc Get(GetSystemConfigRequest) returns (SystemConfigResponse) {
    option (api.get) = "/api/v1/system-config/get";
  }

  // Create creates a new system config.
  rpc Create(CreateSystemConfigRequest) returns (SystemConfigResponse) {
    option (api.post) = "/api/v1/system-config/create";
  }

  // Update updates a system config.
  rpc Update(UpdateSystemConfigRequest) returns (SystemConfigResponse) {
    option (api.post) = "/api/v1/system-config/update";
  }

  // Delete deletes a system config (protected configs cannot be deleted).
  rpc Delete(DeleteSystemConfigRequest) returns (common.OperateResponse) {
    option (api.post) = "/api/v1/system-config/delete";
  }

  // List returns all system configs for an environment.
  rpc List(ListSystemConfigRequest) returns (SystemConfigListResponse) {
    option (api.get) = "/api/v1/system-config/list";
  }
}
